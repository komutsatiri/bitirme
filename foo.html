<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bitirme</title>	


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.0-beta.2/leaflet.css" />
<link rel="stylesheet" href="./css/MarkerCluster.css" />
<link rel="stylesheet" href="./css/MarkerCluster.Default.css" />
<link rel="stylesheet" href="./css/leaflet-search.src.css" />
<link rel="stylesheet" href="./css/foo.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.0-beta.2/leaflet.js"></script>
<script src="./js/leaflet-search.src.js"></script>
<script src="./js/leaflet.markercluster-src.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>


<!--<link rel="stylesheet" type="text/css" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
<link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/MarkerCluster.css" />
<link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/MarkerCluster.Default.css" />


<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/leaflet.markercluster.js'></script>
-->


</head>
<body>
<div id="mapid"></div>

<script>
$(document).ready(function(){

	var map = L.map('mapid').setView([38.99357, 35.24414], 6);
	var marker_cluster = new L.MarkerClusterGroup();

	L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
		attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
    	maxZoom: 10,
    	minZoom: 4
	}).addTo(map);

	var control_search = new L.Control.Search({
		position:'topright',		
		layer: marker_cluster,
		initial: false,
		zoom: 12,
		marker: false
	});

	map.addControl(control_search);

	
	$.getJSON("./events.json",{
		format: "json"
	})	
		.done(function(data){
			var key;
			for (key in data){
				var marker_title = data[key]['where_description'];
				var marker = L.marker([ data[key]['latitude'], data[key]['longitude'] ],{title: marker_title}); 
				marker.bindPopup(marker_title);
				marker_cluster.addLayer(marker);
			}
		
		});	
		map.addLayer(marker_cluster);
});
</script>
</body>
</html>
